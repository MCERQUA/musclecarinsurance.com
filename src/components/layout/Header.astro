---
// Header.astro - Site navigation and branding
import Button from '../ui/Button.astro';

export interface Props {
  class?: string;
  transparent?: boolean;
  fixed?: boolean;
}

const {
  class: className = '',
  transparent = false,
  fixed = true
} = Astro.props;

// Navigation items - this could be moved to a data file later
const navigationItems = [
  { name: 'Home', href: '/' },
  { name: 'Coverage', href: '/coverage' },
  { name: 'About', href: '/about' },
  { name: 'Resources', href: '/resources' },
  { name: 'Contact', href: '/contact' }
];

const headerClasses = `
  ${fixed ? 'fixed top-0 left-0 right-0 z-50' : ''}
  ${transparent ? 'bg-transparent' : 'bg-white shadow-md'}
  transition-all duration-300
  ${className}
`;
---

<header class={headerClasses}>
  <!-- Top Contact Bar -->
  <div class="bg-secondary-gray text-white py-2 px-4">
    <div class="container mx-auto flex justify-between items-center text-sm">
      <div class="flex items-center space-x-6">
        <a href="mailto:Info@musclecarinsurance.com" class="hover:text-accent transition-colors">
          ðŸ“§ Info@musclecarinsurance.com
        </a>
        <a href="tel:844-967-5247" class="hover:text-accent transition-colors">
          ðŸ“ž 844-967-5247
        </a>
      </div>
    </div>
  </div>
  
  <div class="container mx-auto px-4">
    <div class="flex items-center justify-between h-16 lg:h-20">
      
      <!-- Logo -->
      <div class="flex items-center">
        <a href="/" class="flex items-center space-x-2 text-primary-brand hover:text-accent transition-colors">
          <svg class="w-8 h-8" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path d="M18.92 6.01C18.72 5.42 18.16 5 17.5 5H15V3C15 2.45 14.55 2 14 2H10C9.45 2 9 2.45 9 3V5H6.5C5.84 5 5.28 5.42 5.08 6.01L3 12V20C3 20.55 3.45 21 4 21H5C5.55 21 6 20.55 6 20V19H18V20C18 20.55 18.45 21 19 21H20C20.55 21 21 20.55 21 20V12L18.92 6.01ZM11 5H13V7.5L12 8.5L11 7.5V5ZM6.5 16C5.67 16 5 15.33 5 14.5S5.67 13 6.5 13 8 13.67 8 14.5 7.33 16 6.5 16ZM17.5 16C16.67 16 16 15.33 16 14.5S16.67 13 17.5 13 19 13.67 19 14.5 18.33 16 17.5 16Z"/>
          </svg>
          <span class="font-heading text-xl lg:text-2xl font-bold">
            Muscle Car Insurance
          </span>
        </a>
      </div>
      
      <!-- Desktop Navigation -->
      <nav class="hidden lg:flex items-center space-x-8">
        {navigationItems.map((item) => (
          <a 
            href={item.href}
            class="text-secondary-brand hover:text-primary-brand font-medium transition-colors duration-200"
          >
            {item.name}
          </a>
        ))}
      </nav>
      
      <!-- CTA Button -->
      <div class="hidden lg:block">
        <Button variant="primary" href="/quote" size="md">
          Get Quote
        </Button>
      </div>
      
      <!-- Mobile Menu Button -->
      <button 
        class="lg:hidden p-2 rounded-md text-secondary-brand hover:text-primary-brand hover:bg-light transition-colors"
        aria-label="Open mobile menu"
        id="mobile-menu-button"
      >
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>
    </div>
  </div>
  
  <!-- Mobile Menu -->
  <div class="lg:hidden bg-white border-t border-gray-200 hidden" id="mobile-menu">
    <div class="container mx-auto px-4 py-4">
      <nav class="flex flex-col space-y-4">
        {navigationItems.map((item) => (
          <a 
            href={item.href}
            class="text-secondary-brand hover:text-primary-brand font-medium py-2 transition-colors"
          >
            {item.name}
          </a>
        ))}
        <div class="pt-4 border-t border-gray-200">
          <Button variant="primary" href="/quote" size="md" class="w-full justify-center">
            Get Quote
          </Button>
        </div>
      </nav>
    </div>
  </div>
</header>

<!-- Mobile Menu Toggle Script -->
<script>
  const mobileMenuButton = document.getElementById('mobile-menu-button');
  const mobileMenu = document.getElementById('mobile-menu');
  
  if (mobileMenuButton && mobileMenu) {
    mobileMenuButton.addEventListener('click', () => {
      const isHidden = mobileMenu.classList.contains('hidden');
      if (isHidden) {
        mobileMenu.classList.remove('hidden');
        mobileMenuButton.setAttribute('aria-expanded', 'true');
      } else {
        mobileMenu.classList.add('hidden');
        mobileMenuButton.setAttribute('aria-expanded', 'false');
      }
    });
  }
  
  // Close mobile menu when clicking outside
  document.addEventListener('click', (event) => {
    if (mobileMenu && !mobileMenu.contains(event.target) && 
        !mobileMenuButton.contains(event.target)) {
      mobileMenu.classList.add('hidden');
      mobileMenuButton.setAttribute('aria-expanded', 'false');
    }
  });
</script>

<style>
  /* Smooth header transitions */
  header {
    backdrop-filter: blur(10px);
  }
  
  /* Active navigation state */
  nav a[aria-current="page"] {
    color: var(--primary-blue);
    font-weight: 600;
  }
  
  /* Mobile menu animation */
  #mobile-menu {
    animation: slideDown 0.3s ease-out;
  }
  
  @keyframes slideDown {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>